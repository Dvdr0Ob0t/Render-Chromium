[supervisord]
nodaemon=true
logfile=/var/log/supervisord.log
loglevel=info

[program:xvfb]
command=/usr/bin/Xvfb :0 -screen 0 %(ENV_DISPLAY_WIDTH)sx%(ENV_DISPLAY_HEIGHT)sx24
autorestart=true
startsecs=1

[program:fluxbox]
command=/usr/bin/fluxbox
autorestart=true
startsecs=1

[program:x11vnc]
; запуским x11vnc на дисплее :0, только localhost, без пароля, навсегда
command=/usr/bin/x11vnc -display :0 -forever -nopw -shared -rfbport 5900 -localhost
autorestart=true
startsecs=2

[program:novnc]
; uphy/noVNC обычно содержит /root/noVNC и утилиту launch.sh
; слушаем порт из ENV PORT (обычно 8080)
command=/root/noVNC/utils/launch.sh --vnc localhost:5900 --listen %(ENV_PORT)s
autorestart=true
startsecs=3
environment=PORT="8080"

[program:midori]
; небольшой sleep чтобы X успел подняться, запускаем AppImage через wrapper /usr/local/bin/midori
command=bash -c "sleep 4 && /usr/local/bin/midori 'https://google.com'"
autorestart=true
startsecs=5
